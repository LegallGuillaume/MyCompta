{% extends "body.html" %}

{%block body%}

<div class="row">
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col7}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col7}}; background-color: {{color.col1}};">FACTURATION ENCAISSÉE TTC {{annee}}</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{ttc_encaissee}} €</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col6}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col6}}; background-color: {{color.col1}};">Facture en Attente</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{solde_non_payee}} €</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col5}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col5}}; background-color: {{color.col1}};">Facturation disponible {{annee}}</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{facturation_available}} € (72000 €)</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col4}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col4}}; background-color: {{color.col1}};">Facture encaissée HT (2019-20XX)</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{solde_encaissee}} €</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col7}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col7}}; background-color: {{color.col1}};">Dernière facture</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{convert_date(last_facture)}}</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col6}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col6}}; background-color: {{color.col1}};">TVA Récoltée (2019-20xx)</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{tva_total}} € TTC</h5>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div class="card mb-3 shadow" style="max-width: 18rem; border: 0.10rem solid {{color.col5}}; background-color: transparent;">
            <div class="card-header text-uppercase text-xs font-weight-bold" style="color: {{color.col5}}; background-color: {{color.col1}};">Facturation encaissée TTC {{annee_1}}</div>
            <div class="card-body text-info">
                <h5 class="card-title text-right font-weight-bold text-white" style="text-shadow: 1px 1px 2px {{color.col1}};">{{fact_enc_last_year}} €</h5>
            </div>
        </div>
    </div>
</div>

<div class="row" style="margin-top: 20px;">

    <!-- Content Column -->
    <div class="container-fluid">

    <!-- Project Card Example -->
        <table class="table table-bordered shadow" width="100%" cellspacing="0">
            <thead>
            <tr>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">N° Facture</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Client</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Projet</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Date d'envoi</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Jours travaillés</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Taux journalier</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">TVA</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Date d'échéance</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Total HT</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Total TTC</th>
            </tr>
            </thead>
            <tfoot>
            <tr>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">N° Facture</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Client</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Projet</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Date d'envoi</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Jours travaillés</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Taux journalier</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">TVA</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Date d'échéance</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Total HT</th>
                <th style="color: {{color.col3}};text-shadow: 1px 1px 2px white;border: 0.10rem solid {{color.col4}};">Total TTC</th>
            </tr>
            </tfoot>
            <tbody>
            {% for f in factures%}
                <tr>
                {%if f.payee%}
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.name}} <span class="badge badge-success btn-sm"><i class="fas fa-check"></i></span></td>
                {%else%}
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.name}} <span class="badge badge-warning btn-sm"><i class="fas fa-exclamation-triangle"></i></span></td>
                {%endif%}
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{get_client_name(f.id_client)}}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.projet}}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{convert_date(f.date_envoi)}}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.days}}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.tjm}} €</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{%if f.tva %}Oui{%else%}Non{%endif%}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{convert_date(f.date_echeance)}}</td>
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.total}} €</td>
                    {% if f.tva %}
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">{{f.total_ttc}} €</td>
                    {%else%}
                    <td style="color: white;text-shadow: 1px 1px 2px {{color.col1}};border: 0.10rem solid {{color.col6}};">---</td>
                    {%endif%}
                </tr>
            {%endfor%}
            </tbody>
        </table>
    </div>
</div>

{%endblock%}